<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algebra Quiz</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background-color: #fff;
            border: 2px solid #ff9900;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            color: #ff9900;
        }
        #question {
            font-size: 20px;
            margin-bottom: 20px;
        }
        .option {
            margin-bottom: 10px;
        }
        #timer {
            text-align: center;
            color: #000;
            font-size: 20px;
            margin-bottom: 10px;
        }
        #submit {
            background-color: #ff9900;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: block;
            margin: 0 auto;
        }
        #result {
            margin-top: 20px;
            text-align: center;
        }
        .btn {
            background-color: #ff9900;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .btn-group {
            text-align: center;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Algebra Quiz</h1>
        <div id="question"></div>
        <div id="options"></div>
        <div class="btn-group">
            <button id="prev" class="btn">Previous</button>
            <button id="submit" class="btn">Submit</button>
            <button id="next" class="btn">Next</button>
        </div>
        <div id="timer"></div>
        <div id="result"></div>
    </div>

    <script>
        // Fetch questions from JSON file
        fetch('questions.json')
            .then(response => response.json())
            .then(data => {
                window.questions = data;
                window.currentQuestion = 0;
                renderQuestion();
            })
            .catch(error => console.error('Error fetching questions:', error));

        // Fetch solutions from JSON file
        fetch('solutions.json')
            .then(response => response.json())
            .then(data => window.solutions = data)
            .catch(error => console.error('Error fetching solutions:', error));

        function renderQuestion() {
            const questionElement = document.getElementById('question');
            const optionsElement = document.getElementById('options');
            const currentQ = window.questions[window.currentQuestion];

            questionElement.textContent = currentQ.question;
            optionsElement.innerHTML = '';

            currentQ.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.classList.add('option');
                optionElement.innerHTML = `
                    <input type="radio" id="option${index + 1}" name="option" value="${option}">
                    <label for="option${index + 1}">${option}</label>
                `;
                optionsElement.appendChild(optionElement);
            });
        }

        // Add event listeners after fetching questions
        window.onload = function () {
            const timerDisplay = document.getElementById('timer');
            const duration = 300; // 5 minutes in seconds

            // Start the timer
            let timeLeft = duration, minutes, seconds;
            const timer = setInterval(function () {
                minutes = Math.floor(timeLeft / 60);
                seconds = timeLeft % 60;

                seconds = seconds < 10 ? "0" + seconds : seconds;
                minutes = minutes < 10 ? "0" + minutes : minutes;

                timerDisplay.textContent = `${minutes}:${seconds}`;

                if (--timeLeft < 0) {
                    clearInterval(timer);
                    showResult();
                } else if (timeLeft <= 3) {
                    timerDisplay.style.color = '#ff0000';
                }
            }, 1000);

            // Add event listeners for buttons
            document.getElementById('submit').addEventListener('click', () => showResult());

            document.getElementById('next').addEventListener('click', () => {
                saveAnswer();
                if (window.currentQuestion < window.questions.length - 1) {
                    window.currentQuestion++;
                    renderQuestion();
                }
            });

            document.getElementById('prev').addEventListener('click', () => {
                if (window.currentQuestion > 0) {
                    window.currentQuestion--;
                    renderQuestion();
                }
            });
        };

        function saveAnswer() {
            const options = document.getElementsByName('option');
            options.forEach(option => {
                if (option.checked && option.value === window.questions[window.currentQuestion].answer) {
                    window.score++;
                }
            });
        }

        function showResult() {
            clearInterval(timer);
            const resultElement = document.getElementById('result');
            resultElement.innerHTML = `Your score is ${window.score}/${window.questions.length}.`;
            const explanation = document.createElement('div');
            explanation.innerHTML = `
                <p>Explanation:</p>
                <ol>
                    <li>Question 1: ${window.solutions[0]}</li>
                    <li>Question 2: ${window.solutions[1]}</li>
                    <li>Question 3: ${window.solutions[2]}</li>
                    <li>Question 4: ${window.solutions[3]}</li>
                    <li>Question 5: ${window.solutions[4]}</li>
                    <li>Question 6: ${window.solutions[5]}</li>
                    <li>Question 7: ${window.solutions[6]}</li>
                    <li>Question 8: ${window.solutions[7]}</li>
                    <li>Question 9: ${window.solutions[8]}</li>
                    <li>Question 10: ${window.solutions[9]}</li>
                </ol>
            `;
            resultElement.appendChild(explanation);
        }
    </script>
</body>
</html>
